# 第一阶段：基础框架搭建 - 详细开发计划

## 阶段目标
完成项目基础架构搭建，包括后端Spring Boot框架、数据库、基础配置和核心工具类的实现。

## 时间安排
- **预计时间**: 2周
- **开始日期**: 2025-11-21
- **预计完成**: 2025-12-05

---

## 一、后端开发任务清单

### 1.1 项目初始化 ✅
- [x] 创建Spring Boot 3项目
- [x] 配置pom.xml依赖
- [x] 创建项目目录结构
- [ ] 配置application.yml（开发/生产环境）

**关键依赖**:
```xml
- Spring Boot 3.2.0
- Spring Boot Web
- MyBatis-Plus 3.5.5
- MySQL Connector 8.0
- Redis
- Knife4j (Swagger)
- Lombok
- Hutool
- JWT
```

### 1.2 数据库配置
- [x] 创建数据库初始化SQL脚本
- [ ] 配置MyBatis-Plus
- [ ] 配置数据源连接池（Druid）
- [ ] 配置MyBatis-Plus分页插件
- [ ] 配置自动填充
- [ ] 测试数据库连接

**输出文件**:
- `database/init.sql` ✅
- `MybatisPlusConfig.java`
- `application-dev.yml`

### 1.3 Redis配置
- [ ] 配置Redis连接
- [ ] 编写Redis工具类
- [ ] 配置Redis序列化
- [ ] 测试Redis读写

**输出文件**:
- `RedisConfig.java`
- `RedisUtil.java`

### 1.4 Swagger API文档
- [ ] 集成Knife4j
- [ ] 配置Swagger文档信息
- [ ] 添加接口文档注解示例
- [ ] 测试访问文档页面

**访问地址**: `http://localhost:8080/doc.html`

### 1.5 JWT认证机制
- [ ] 实现JWT工具类
- [ ] 配置Security（可选，或自定义拦截器）
- [ ] 实现登录拦截器
- [ ] 实现Token生成和验证
- [ ] 测试Token认证流程

**输出文件**:
- `JwtUtil.java`
- `AuthInterceptor.java`
- `LoginUser.java`（当前登录用户信息）

### 1.6 统一响应格式
- [ ] 创建Result统一响应类
- [ ] 创建ResultCode状态码枚举
- [ ] 实现全局返回值处理器

**输出文件**:
- `Result.java`
- `ResultCode.java`
- `ResponseAdvice.java`

### 1.7 全局异常处理
- [ ] 创建自定义业务异常类
- [ ] 实现全局异常处理器
- [ ] 定义常见异常处理逻辑
- [ ] 测试异常捕获

**输出文件**:
- `BusinessException.java`
- `GlobalExceptionHandler.java`

### 1.8 通用工具类
- [ ] 实现文件上传工具（对接云存储）
- [ ] 实现手机号验证工具
- [ ] 实现身份证验证工具
- [ ] 实现日期时间工具
- [ ] 实现字符串工具

**输出文件**:
- `FileUploadUtil.java`
- `ValidatorUtil.java`
- `DateUtil.java`

### 1.9 基础实体类
- [ ] 创建BaseEntity基类（包含通用字段）
- [ ] 创建用户实体类
- [ ] 创建其他核心实体类
- [ ] 使用MyBatis-Plus自动填充

**输出文件**:
- `BaseEntity.java`
- `User.java`
- `StrayAnimal.java`
- 等其他实体类...

### 1.10 基础Service和Mapper
- [ ] 创建BaseService接口
- [ ] 创建BaseMapper接口
- [ ] 实现用户Service和Mapper
- [ ] 测试CRUD操作

---

## 二、前端开发任务清单

### 2.1 UniApp小程序项目
- [ ] 创建UniApp项目
- [ ] 配置pages.json（页面路由）
- [ ] 配置manifest.json（应用配置）
- [ ] 创建基础页面结构
  - [ ] 首页
  - [ ] 救助页
  - [ ] 领养页
  - [ ] 社区页
  - [ ] 我的页
- [ ] 封装HTTP请求工具（request.js）
- [ ] 实现Token管理
- [ ] 配置环境变量

**输出文件**:
```
mengyo-miniapp/
├── pages/
│   ├── index/
│   ├── rescue/
│   ├── adoption/
│   ├── community/
│   └── user/
├── utils/
│   ├── request.js
│   └── auth.js
├── store/
│   └── index.js
├── App.vue
├── main.js
├── manifest.json
└── pages.json
```

### 2.2 Vue3管理后台项目
- [ ] 创建Vue3 + Vite项目
- [ ] 安装Element Plus
- [ ] 配置路由（Vue Router）
- [ ] 配置状态管理（Pinia）
- [ ] 创建基础布局
  - [ ] 侧边栏菜单
  - [ ] 顶部导航
  - [ ] 面包屑导航
- [ ] 封装Axios请求
- [ ] 实现登录页面
- [ ] 实现Dashboard页面

**输出文件**:
```
mengyo-admin/
├── src/
│   ├── api/
│   ├── assets/
│   ├── components/
│   ├── layout/
│   │   ├── Sidebar.vue
│   │   ├── Header.vue
│   │   └── Layout.vue
│   ├── router/
│   │   └── index.js
│   ├── store/
│   │   └── index.js
│   ├── utils/
│   │   ├── request.js
│   │   └── auth.js
│   ├── views/
│   │   ├── login/
│   │   └── dashboard/
│   ├── App.vue
│   └── main.js
├── package.json
└── vite.config.js
```

---

## 三、开发规范

### 3.1 代码规范
- 遵循阿里巴巴Java开发规范
- 类名使用大驼峰命名
- 方法名、变量名使用小驼峰命名
- 常量使用全大写下划线分隔
- 必须添加类和方法注释

### 3.2 Git规范
- 分支命名：`feature/功能名称`
- 提交信息格式：`[类型] 描述`
  - `[feat]` 新功能
  - `[fix]` 修复bug
  - `[docs]` 文档更新
  - `[style]` 代码格式
  - `[refactor]` 代码重构
  - `[test]` 测试相关

### 3.3 接口规范
- RESTful风格
- 统一使用JSON格式
- 统一响应格式
- 统一错误码

---

## 四、测试计划

### 4.1 单元测试
- [ ] 测试数据库连接
- [ ] 测试Redis连接
- [ ] 测试JWT生成和验证
- [ ] 测试文件上传
- [ ] 测试用户CRUD操作

### 4.2 接口测试
- [ ] 使用Postman/Apifox测试接口
- [ ] 编写接口测试用例
- [ ] 测试异常情况处理

### 4.3 前端测试
- [ ] 测试小程序登录流程
- [ ] 测试管理后台登录
- [ ] 测试接口调用

---

## 五、交付物清单

### 5.1 后端
- [x] Spring Boot项目代码
- [x] 数据库初始化SQL脚本
- [ ] API接口文档（Swagger）
- [ ] 配置文件说明文档
- [ ] 部署文档

### 5.2 前端
- [ ] UniApp小程序源码
- [ ] Vue3管理后台源码
- [ ] 前端开发文档
- [ ] 环境配置说明

### 5.3 文档
- [x] 项目架构设计文档
- [x] 数据库设计文档
- [ ] 接口设计文档
- [ ] 开发环境搭建指南
- [ ] 部署文档

---

## 六、当前进度

### 已完成 ✅
1. ✅ 项目架构设计文档
2. ✅ 数据库表设计和SQL脚本
3. ✅ 开发计划制定

### 进行中 🔄
1. 🔄 创建项目目录结构
2. 🔄 配置后端基础框架

### 待开始 📋
1. 配置数据库连接
2. 实现基础工具类
3. 创建前端项目

---

## 七、注意事项

1. **配置管理**
   - 敏感信息使用环境变量
   - 开发/生产环境配置分离
   - 不要将密码等信息提交到Git

2. **性能考虑**
   - 合理使用Redis缓存
   - 数据库连接池配置
   - 分页查询优化

3. **安全考虑**
   - 接口权限控制
   - SQL注入防护
   - XSS防护
   - 密码加密存储

4. **可扩展性**
   - 模块化设计
   - 面向接口编程
   - 避免硬编码

---

## 八、下一步计划

第一阶段完成后，将进入**第二阶段：用户系统开发**，主要包括：
1. 微信授权登录
2. 用户注册/登录
3. 用户信息管理
4. 实名认证
5. 积分系统

---

**文档版本**: v1.0  
**创建日期**: 2025-11-21  
**最后更新**: 2025-11-21
