import{r as l,o as a,y as e,v as s,a as t,w as u,i as c,b as o,d as i,h as n,e as d,f,I as r,S as v,k as _,F as p,l as b,q as g,t as m,p as k,z as h,s as y,A as C,u as x,B as w}from"./index-CD2lgknr.js";import{_ as j,r as L}from"./_plugin-vue_export-helper.DKEN6AQv.js";const q=j({__name:"list",setup(j){const q=l(""),F=l("all"),S=l(!1),I=l(!1),T=l(!1),V=l(1),z=l("all"),A=l("all"),U=l("all"),B=l("all"),R=l([{label:"å…¨éƒ¨",value:"all",emoji:"ðŸ¾"},{label:"ç‹—ç‹—",value:"dog",emoji:"ðŸ•"},{label:"çŒ«å’ª",value:"cat",emoji:"ðŸˆ"},{label:"å…”å­",value:"rabbit",emoji:"ðŸ°"},{label:"å…¶ä»–",value:"other",emoji:"ðŸ¦Š"}]),$=l([{label:"å…¨éƒ¨",value:"all"},{label:"ç‹—",value:"dog"},{label:"çŒ«",value:"cat"},{label:"å…”å­",value:"rabbit"},{label:"å…¶ä»–",value:"other"}]),D=l([{label:"å…¨éƒ¨",value:"all"},{label:"å¥åº·",value:"healthy"},{label:"å—ä¼¤",value:"injured"},{label:"æ‚£ç—…",value:"sick"}]),E=l([{label:"å…¨éƒ¨",value:"all"},{label:"å¹¼å¹´ (0-1å²)",value:"young"},{label:"æˆå¹´ (1-7å²)",value:"adult"},{label:"è€å¹´ (7å²ä»¥ä¸Š)",value:"senior"}]),G=l([{label:"å…¨éƒ¨",value:"all"},{label:"å¯é¢†å…»",value:"available"},{label:"å¾…å®¡æ ¸",value:"pending"},{label:"å·²é¢†å…»",value:"adopted"}]),H=l([]);a(()=>{K()}),e(F,()=>{J(),K()});const J=()=>{V.value=1,H.value=[],T.value=!1},K=async()=>{if(!I.value&&!T.value){I.value=!0;try{const l={page:V.value,size:10};q.value&&(l.keyword=q.value),"all"!==F.value&&(l.animalType=F.value),"all"!==z.value&&(l.animalType=z.value),"all"!==A.value&&(l.healthStatus=A.value),"all"!==U.value&&(l.ageRange=U.value),"all"!==B.value&&(l.status=B.value);const a=await L.getAnimalList(l);if(a.data&&a.data.records){const l=a.data.records.map(l=>({...l,photo:l.photo||N(l.animalType),isLiked:!1}));1===V.value?H.value=l:H.value=[...H.value,...l],l.length<10&&(T.value=!0)}}catch(l){console.error("åŠ è½½åŠ¨ç‰©åˆ—è¡¨å¤±è´¥",l),s({title:"åŠ è½½å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}finally{I.value=!1}}},M=()=>{I.value||T.value||(V.value++,K())},N=l=>{const a={dog:"https://images.unsplash.com/photo-1543466835-00a7907e9de1?w=600&q=80",cat:"https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?w=600&q=80",rabbit:"https://images.unsplash.com/photo-1585110396000-c9ffd4e4b308?w=600&q=80",other:"https://images.unsplash.com/photo-1425082661705-1834bfd09dca?w=600&q=80"};return a[l]||a.other},O=()=>{J(),K()},P=()=>{q.value="",J(),K()},Q=()=>{z.value="all",A.value="all",U.value="all",B.value="all"},W=()=>{S.value=!1,J(),K()};return(l,a)=>{const e=d,j=r,L=c,V=v,J=k,K=h;return o(),t(L,{class:"page"},{default:u(()=>[i(L,{class:"search-bar"},{default:u(()=>[i(L,{class:"search-input-wrapper"},{default:u(()=>[i(e,{class:"search-icon"},{default:u(()=>[f("ðŸ”")]),_:1}),i(j,{modelValue:q.value,"onUpdate:modelValue":a[0]||(a[0]=l=>q.value=l),type:"text",placeholder:"æœç´¢åŠ¨ç‰©åç§°æˆ–å“ç§",class:"search-input","placeholder-class":"input-placeholder",onConfirm:O},null,8,["modelValue"]),q.value?(o(),t(e,{key:0,class:"clear-icon",onClick:P},{default:u(()=>[f("âœ•")]),_:1})):n("",!0)]),_:1}),i(L,{class:"filter-btn",onClick:a[1]||(a[1]=l=>S.value=!0)},{default:u(()=>[i(e,{class:"filter-icon"},{default:u(()=>[f("âš™ï¸")]),_:1})]),_:1})]),_:1}),i(V,{"scroll-x":"",class:"category-scroll","show-scrollbar":"false"},{default:u(()=>[i(L,{class:"category-list"},{default:u(()=>[(o(!0),_(p,null,b(R.value,(l,a)=>(o(),t(L,{key:a,class:g(["category-item",{active:F.value===l.value}]),onClick:a=>{return e=l.value,void(F.value=e);var e}},{default:u(()=>[i(e,{class:"category-emoji"},{default:u(()=>[f(m(l.emoji),1)]),_:2},1024),i(e,{class:"category-text"},{default:u(()=>[f(m(l.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),i(V,{"scroll-y":"",class:"animal-scroll",onScrolltolower:M},{default:u(()=>[i(L,{class:"animal-list"},{default:u(()=>[(o(!0),_(p,null,b(H.value,l=>(o(),t(L,{key:l.id,class:"animal-card",onClick:l=>{s({title:"è¯¦æƒ…é¡µé¢å¼€å‘ä¸­",icon:"none"})}},{default:u(()=>[i(L,{class:"image-wrapper"},{default:u(()=>[i(J,{src:l.photo,mode:"aspectFill",class:"animal-image"},null,8,["src"]),i(L,{class:"badge-wrapper"},{default:u(()=>[l.isUrgent?(o(),t(L,{key:0,class:"badge urgent"},{default:u(()=>[i(e,{class:"badge-icon"},{default:u(()=>[f("ðŸš¨")]),_:1}),i(e,{class:"badge-text"},{default:u(()=>[f("ç´§æ€¥")]),_:1})]),_:1})):n("",!0),"injured"===l.healthStatus?(o(),t(L,{key:1,class:"badge health"},{default:u(()=>[i(e,{class:"badge-icon"},{default:u(()=>[f("ðŸ¥")]),_:1}),i(e,{class:"badge-text"},{default:u(()=>[f("å—ä¼¤")]),_:1})]),_:1})):n("",!0)]),_:2},1024),i(L,{class:g(["gender-badge",l.gender])},{default:u(()=>[f(m("male"===l.gender?"â™‚":"â™€"),1)]),_:2},1032,["class"])]),_:2},1024),i(L,{class:"animal-info"},{default:u(()=>[i(L,{class:"info-header"},{default:u(()=>[i(e,{class:"animal-name"},{default:u(()=>[f(m(l.name||"å¾…å‘½å"),1)]),_:2},1024),i(K,{class:g(["like-btn",{liked:l.isLiked}]),onClick:y(a=>(async l=>{l.isLiked=!l.isLiked,s({title:l.isLiked?"å·²æ”¶è—":"å·²å–æ¶ˆæ”¶è—",icon:"success",duration:1500})})(l),["stop"])},{default:u(()=>[i(e,{class:"like-icon"},{default:u(()=>[f(m(l.isLiked?"â¤ï¸":"ðŸ¤"),1)]),_:2},1024)]),_:2},1032,["class","onClick"])]),_:2},1024),i(L,{class:"info-tags"},{default:u(()=>[i(L,{class:"info-tag"},{default:u(()=>[i(e,{class:"tag-label"},{default:u(()=>[f("å“ç§")]),_:1}),i(e,{class:"tag-value"},{default:u(()=>[f(m(l.breed),1)]),_:2},1024)]),_:2},1024),i(L,{class:"info-tag"},{default:u(()=>[i(e,{class:"tag-label"},{default:u(()=>[f("å¹´é¾„")]),_:1}),i(e,{class:"tag-value"},{default:u(()=>[f(m(l.age),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),i(L,{class:"info-location"},{default:u(()=>[i(e,{class:"location-icon"},{default:u(()=>[f("ðŸ“")]),_:1}),i(e,{class:"location-text"},{default:u(()=>[f(m(l.location),1)]),_:2},1024)]),_:2},1024),i(L,{class:"info-desc"},{default:u(()=>[f(m(l.description),1)]),_:2},1024),i(L,{class:"card-footer"},{default:u(()=>[i(L,{class:g(["status-tag",l.status])},{default:u(()=>{return[f(m((a=l.status,{available:"å¯é¢†å…»",pending:"å¾…å®¡æ ¸",adopted:"å·²é¢†å…»",rescued:"æ•‘åŠ©ä¸­"}[a]||"æœªçŸ¥")),1)];var a}),_:2},1032,["class"]),i(K,{class:"btn-adopt",onClick:y(a=>(l=>{C("userInfo")?w({title:"ç¡®è®¤é¢†å…»",content:`ç¡®å®šè¦ç”³è¯·é¢†å…»${l.name||"è¿™åªå°å¯çˆ±"}å—ï¼Ÿ`,confirmColor:"#FF8C42",success:l=>{l.confirm&&s({title:"ç”³è¯·å·²æäº¤",icon:"success"})}}):x({url:"/pages/login/index"})})(l),["stop"])},{default:u(()=>[i(e,{class:"btn-icon"},{default:u(()=>[f("ðŸ ")]),_:1}),i(e,{class:"btn-text"},{default:u(()=>[f("ç«‹å³é¢†å…»")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1}),0!==H.value.length||I.value?n("",!0):(o(),t(L,{key:0,class:"empty-state"},{default:u(()=>[i(e,{class:"empty-icon"},{default:u(()=>[f("ðŸ¾")]),_:1}),i(e,{class:"empty-title"},{default:u(()=>[f("æš‚æ— æµæµªåŠ¨ç‰©ä¿¡æ¯")]),_:1}),i(e,{class:"empty-description"},{default:u(()=>[f("æ•¬è¯·æœŸå¾…æ›´å¤šå°å¯çˆ±")]),_:1})]),_:1})),I.value?(o(),t(L,{key:1,class:"loading-state"},{default:u(()=>[i(L,{class:"loading-spinner"}),i(e,{class:"loading-text"},{default:u(()=>[f("åŠ è½½ä¸­...")]),_:1})]),_:1})):n("",!0),T.value&&H.value.length>0?(o(),t(L,{key:2,class:"no-more"},{default:u(()=>[i(e,{class:"no-more-text"},{default:u(()=>[f("æ²¡æœ‰æ›´å¤šäº†~")]),_:1})]),_:1})):n("",!0),i(L,{class:"list-footer"})]),_:1}),S.value?(o(),t(L,{key:0,class:"filter-modal",onClick:a[4]||(a[4]=l=>S.value=!1)},{default:u(()=>[i(L,{class:"filter-content",onClick:a[3]||(a[3]=y(()=>{},["stop"]))},{default:u(()=>[i(L,{class:"filter-header"},{default:u(()=>[i(e,{class:"filter-title"},{default:u(()=>[f("ç­›é€‰æ¡ä»¶")]),_:1}),i(L,{class:"filter-close",onClick:a[2]||(a[2]=l=>S.value=!1)},{default:u(()=>[i(e,{class:"close-icon"},{default:u(()=>[f("âœ•")]),_:1})]),_:1})]),_:1}),i(V,{"scroll-y":"",class:"filter-scroll"},{default:u(()=>[i(L,{class:"filter-section"},{default:u(()=>[i(e,{class:"filter-label"},{default:u(()=>[f("åŠ¨ç‰©ç±»åž‹")]),_:1}),i(L,{class:"filter-options"},{default:u(()=>[(o(!0),_(p,null,b($.value,l=>(o(),t(L,{key:l.value,class:g(["filter-option",{active:z.value===l.value}]),onClick:a=>z.value=l.value},{default:u(()=>[f(m(l.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),i(L,{class:"filter-section"},{default:u(()=>[i(e,{class:"filter-label"},{default:u(()=>[f("å¥åº·çŠ¶å†µ")]),_:1}),i(L,{class:"filter-options"},{default:u(()=>[(o(!0),_(p,null,b(D.value,l=>(o(),t(L,{key:l.value,class:g(["filter-option",{active:A.value===l.value}]),onClick:a=>A.value=l.value},{default:u(()=>[f(m(l.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),i(L,{class:"filter-section"},{default:u(()=>[i(e,{class:"filter-label"},{default:u(()=>[f("å¹´é¾„èŒƒå›´")]),_:1}),i(L,{class:"filter-options"},{default:u(()=>[(o(!0),_(p,null,b(E.value,l=>(o(),t(L,{key:l.value,class:g(["filter-option",{active:U.value===l.value}]),onClick:a=>U.value=l.value},{default:u(()=>[f(m(l.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),i(L,{class:"filter-section"},{default:u(()=>[i(e,{class:"filter-label"},{default:u(()=>[f("é¢†å…»çŠ¶æ€")]),_:1}),i(L,{class:"filter-options"},{default:u(()=>[(o(!0),_(p,null,b(G.value,l=>(o(),t(L,{key:l.value,class:g(["filter-option",{active:B.value===l.value}]),onClick:a=>B.value=l.value},{default:u(()=>[f(m(l.label),1)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1})]),_:1}),i(L,{class:"filter-actions"},{default:u(()=>[i(K,{class:"btn-reset",onClick:Q},{default:u(()=>[i(e,{class:"btn-text"},{default:u(()=>[f("é‡ç½®")]),_:1})]),_:1}),i(K,{class:"btn-confirm",onClick:W},{default:u(()=>[i(e,{class:"btn-text"},{default:u(()=>[f("ç¡®å®š")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):n("",!0)]),_:1})}}},[["__scopeId","data-v-1b082dea"]]);export{q as default};
