import{r as e,a,w as l,i as s,b as t,d as c,e as o,f as n,q as u,z as i,I as d,t as r,H as f,h as p,s as _,v,J as m,K as h,L as g,D as b,M as k}from"./index-CD2lgknr.js";import{_ as x,u as w}from"./_plugin-vue_export-helper.DKEN6AQv.js";const y=x({__name:"index",setup(x){const y=e("wechat"),C=e(""),I=e(""),V=e(0),j=e(!1),L=e(!1),B=e(!1),F=()=>{j.value=!j.value},T=()=>{j.value?(m({title:"ç™»å½•ä¸­..."}),h({provider:"weixin",success:async e=>{try{const a=await w.wxLogin({code:e.code});b("token",a.data.token),b("userInfo",a.data.userInfo),g(),v({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout(()=>{k({url:"/pages/index/index"})},1500)}catch(a){g(),console.error("ç™»å½•å¤±è´¥",a),v({title:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},fail:e=>{g(),console.error("å¾®ä¿¡æŽˆæƒå¤±è´¥",e),v({title:"æŽˆæƒå¤±è´¥",icon:"none"})}})):v({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–",icon:"none",duration:2e3})},U=async()=>{if(C.value)if(/^1[3-9]\d{9}$/.test(C.value))try{m({title:"å‘é€ä¸­..."}),await w.sendCode(C.value),g(),v({title:"éªŒè¯ç å·²å‘é€",icon:"success"}),V.value=60;const e=setInterval(()=>{V.value--,V.value<=0&&clearInterval(e)},1e3)}catch(e){g(),console.error("å‘é€éªŒè¯ç å¤±è´¥",e),v({title:"å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}else v({title:"æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®",icon:"none"});else v({title:"è¯·è¾“å…¥æ‰‹æœºå·",icon:"none"})},$=async()=>{if(j.value)if(C.value)if(I.value)try{m({title:"ç™»å½•ä¸­..."});const e=await w.phoneLogin({phone:C.value,code:I.value});b("token",e.data.token),b("userInfo",e.data.userInfo),g(),v({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout(()=>{k({url:"/pages/index/index"})},1500)}catch(e){g(),console.error("ç™»å½•å¤±è´¥",e),v({title:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}else v({title:"è¯·è¾“å…¥éªŒè¯ç ",icon:"none"});else v({title:"è¯·è¾“å…¥æ‰‹æœºå·",icon:"none"});else v({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–",icon:"none",duration:2e3})},q=e=>{v({title:"åè®®é¡µé¢å¼€å‘ä¸­",icon:"none"})},z=()=>{v({title:"æš‚æœªå¼€æ”¾",icon:"none"})};return(e,v)=>{const m=s,h=o,g=i,b=d,k=f;return t(),a(m,{class:"page"},{default:l(()=>[c(m,{class:"bg-decoration"},{default:l(()=>[c(m,{class:"circle circle-1"}),c(m,{class:"circle circle-2"}),c(m,{class:"circle circle-3"})]),_:1}),c(m,{class:"logo-section"},{default:l(()=>[c(m,{class:"logo-wrapper"},{default:l(()=>[c(h,{class:"logo-emoji"},{default:l(()=>[n("ðŸ¾")]),_:1})]),_:1}),c(h,{class:"app-name"},{default:l(()=>[n("èŒå‹ç›Šç«™")]),_:1}),c(h,{class:"app-slogan"},{default:l(()=>[n("ç”¨çˆ±å®ˆæŠ¤æ¯ä¸€ä¸ªç”Ÿå‘½")]),_:1})]),_:1}),c(m,{class:"login-card"},{default:l(()=>[c(m,{class:"login-tabs"},{default:l(()=>[c(m,{class:u(["tab-item",{active:"wechat"===y.value}]),onClick:v[0]||(v[0]=e=>y.value="wechat")},{default:l(()=>[c(h,{class:"tab-icon"},{default:l(()=>[n("ðŸ’š")]),_:1}),c(h,{class:"tab-text"},{default:l(()=>[n("å¾®ä¿¡ç™»å½•")]),_:1})]),_:1},8,["class"]),c(m,{class:u(["tab-item",{active:"phone"===y.value}]),onClick:v[1]||(v[1]=e=>y.value="phone")},{default:l(()=>[c(h,{class:"tab-icon"},{default:l(()=>[n("ðŸ“±")]),_:1}),c(h,{class:"tab-text"},{default:l(()=>[n("æ‰‹æœºç™»å½•")]),_:1})]),_:1},8,["class"])]),_:1}),"wechat"===y.value?(t(),a(m,{key:0,class:"login-form"},{default:l(()=>[c(m,{class:"wechat-info"},{default:l(()=>[c(h,{class:"info-icon"},{default:l(()=>[n("ðŸ”’")]),_:1}),c(h,{class:"info-text"},{default:l(()=>[n("ä½¿ç”¨å¾®ä¿¡è´¦å·å¿«é€Ÿç™»å½•")]),_:1})]),_:1}),c(g,{class:"btn-wechat",onClick:T},{default:l(()=>[c(h,{class:"btn-icon"},{default:l(()=>[n("ðŸ’š")]),_:1}),c(h,{class:"btn-text"},{default:l(()=>[n("å¾®ä¿¡ä¸€é”®ç™»å½•")]),_:1})]),_:1})]),_:1})):(t(),a(m,{key:1,class:"login-form"},{default:l(()=>[c(m,{class:"form-group"},{default:l(()=>[c(m,{class:u(["input-wrapper",{focused:L.value}])},{default:l(()=>[c(h,{class:"input-icon"},{default:l(()=>[n("ðŸ“±")]),_:1}),c(b,{modelValue:C.value,"onUpdate:modelValue":v[2]||(v[2]=e=>C.value=e),type:"number",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",maxlength:"11",class:"form-input","placeholder-class":"input-placeholder",onFocus:v[3]||(v[3]=e=>L.value=!0),onBlur:v[4]||(v[4]=e=>L.value=!1)},null,8,["modelValue"])]),_:1},8,["class"])]),_:1}),c(m,{class:"form-group"},{default:l(()=>[c(m,{class:u(["input-wrapper",{focused:B.value}])},{default:l(()=>[c(h,{class:"input-icon"},{default:l(()=>[n("ðŸ”")]),_:1}),c(b,{modelValue:I.value,"onUpdate:modelValue":v[5]||(v[5]=e=>I.value=e),type:"number",placeholder:"è¯·è¾“å…¥éªŒè¯ç ",maxlength:"6",class:"form-input code-input","placeholder-class":"input-placeholder",onFocus:v[6]||(v[6]=e=>B.value=!0),onBlur:v[7]||(v[7]=e=>B.value=!1)},null,8,["modelValue"]),c(g,{class:u(["btn-code",{disabled:V.value>0}]),disabled:V.value>0,onClick:U},{default:l(()=>[n(r(V.value>0?`${V.value}s`:"èŽ·å–éªŒè¯ç "),1)]),_:1},8,["class","disabled"])]),_:1},8,["class"])]),_:1}),c(g,{class:"btn-login",onClick:$},{default:l(()=>[c(h,{class:"btn-text"},{default:l(()=>[n("ç«‹å³ç™»å½•")]),_:1})]),_:1})]),_:1})),c(m,{class:"agreement"},{default:l(()=>[c(k,{class:"agreement-label",onClick:F},{default:l(()=>[c(m,{class:"checkbox-wrapper"},{default:l(()=>[c(m,{class:u(["checkbox",{checked:j.value}])},{default:l(()=>[j.value?(t(),a(h,{key:0,class:"check-icon"},{default:l(()=>[n("âœ“")]),_:1})):p("",!0)]),_:1},8,["class"])]),_:1}),c(h,{class:"agreement-text"},{default:l(()=>[n(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ "),c(h,{class:"agreement-link",onClick:v[8]||(v[8]=_(e=>q(),["stop"]))},{default:l(()=>[n("ã€Šç”¨æˆ·åè®®ã€‹")]),_:1}),n(" å’Œ "),c(h,{class:"agreement-link",onClick:v[9]||(v[9]=_(e=>q(),["stop"]))},{default:l(()=>[n("ã€Šéšç§æ”¿ç­–ã€‹")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(m,{class:"other-login"},{default:l(()=>[c(m,{class:"divider-wrapper"},{default:l(()=>[c(m,{class:"divider-line"}),c(h,{class:"divider-text"},{default:l(()=>[n("å…¶ä»–ç™»å½•æ–¹å¼")]),_:1}),c(m,{class:"divider-line"})]),_:1}),c(m,{class:"other-methods"},{default:l(()=>[c(m,{class:"method-item",onClick:z},{default:l(()=>[c(m,{class:"method-icon apple"},{default:l(()=>[c(h,{class:"icon-symbol"})]),_:1}),c(h,{class:"method-name"},{default:l(()=>[n("Apple")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-cf94e392"]]);export{y as default};
