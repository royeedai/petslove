import{r as e,c as a,w as l,i as s,a as t,b as c,h as o,j as n,l as i,p as u,I as d,t as r,B as f,C as p,D as _,q as v,u as m,E as h,G as g,H as b,z as x,J as k,n as w}from"./index-CZhDUO0x.js";import{u as y}from"./api.BH5_vnvO.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=C({__name:"index",setup(C){const I=e("wechat"),V=e(""),j=e(""),F=e(0),L=e(!1),T=()=>{L.value?(h({title:"ç™»å½•ä¸­..."}),g({provider:"weixin",success:async e=>{try{const a=await y.wxLogin({code:e.code});x("token",a.data.token),x("userInfo",a.data.userInfo),b(),m({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout(()=>{k({url:"/pages/index/index"})},1500)}catch(a){b(),console.error("ç™»å½•å¤±è´¥",a),m({title:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}},fail:e=>{b(),console.error("å¾®ä¿¡æŽˆæƒå¤±è´¥",e),m({title:"æŽˆæƒå¤±è´¥",icon:"none"})}})):m({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–",icon:"none",duration:2e3})},U=async()=>{if(V.value)if(/^1[3-9]\d{9}$/.test(V.value))try{h({title:"å‘é€ä¸­..."}),await y.sendCode(V.value),b(),m({title:"éªŒè¯ç å·²å‘é€",icon:"success"}),F.value=60;const e=setInterval(()=>{F.value--,F.value<=0&&clearInterval(e)},1e3)}catch(e){b(),console.error("å‘é€éªŒè¯ç å¤±è´¥",e),m({title:"å‘é€å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}else m({title:"æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®",icon:"none"});else m({title:"è¯·è¾“å…¥æ‰‹æœºå·",icon:"none"})},$=async()=>{if(L.value)if(V.value)if(j.value)try{h({title:"ç™»å½•ä¸­..."});const e=await y.phoneLogin({phone:V.value,code:j.value});x("token",e.data.token),x("userInfo",e.data.userInfo),b(),m({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout(()=>{k({url:"/pages/index/index"})},1500)}catch(e){b(),console.error("ç™»å½•å¤±è´¥",e),m({title:"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",icon:"none"})}else m({title:"è¯·è¾“å…¥éªŒè¯ç ",icon:"none"});else m({title:"è¯·è¾“å…¥æ‰‹æœºå·",icon:"none"});else m({title:"è¯·å…ˆåŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–",icon:"none",duration:2e3})},q=e=>{L.value=e.detail.value.length>0},z=e=>{w({url:{user:"/pages/protocol/user",privacy:"/pages/protocol/privacy"}[e]})},A=()=>{m({title:"æš‚æœªå¼€æ”¾",icon:"none"})};return(e,m)=>{const h=s,g=o,b=u,x=d,k=_,w=p,y=f;return t(),a(h,{class:"page"},{default:l(()=>[c(h,{class:"bg-decoration"},{default:l(()=>[c(h,{class:"circle circle-1"}),c(h,{class:"circle circle-2"}),c(h,{class:"circle circle-3"})]),_:1}),c(h,{class:"logo-section"},{default:l(()=>[c(h,{class:"logo-wrapper"},{default:l(()=>[c(g,{class:"logo-emoji"},{default:l(()=>[n("ðŸ¾")]),_:1})]),_:1}),c(g,{class:"app-name"},{default:l(()=>[n("èŒå‹ç›Šç«™")]),_:1}),c(g,{class:"app-slogan"},{default:l(()=>[n("ç”¨çˆ±å®ˆæŠ¤æ¯ä¸€ä¸ªç”Ÿå‘½")]),_:1})]),_:1}),c(h,{class:"login-card"},{default:l(()=>[c(h,{class:"login-tabs"},{default:l(()=>[c(h,{class:i(["tab-item",{active:"wechat"===I.value}]),onClick:m[0]||(m[0]=e=>I.value="wechat")},{default:l(()=>[c(g,{class:"tab-icon"},{default:l(()=>[n("ðŸ’š")]),_:1}),c(g,{class:"tab-text"},{default:l(()=>[n("å¾®ä¿¡ç™»å½•")]),_:1})]),_:1},8,["class"]),c(h,{class:i(["tab-item",{active:"phone"===I.value}]),onClick:m[1]||(m[1]=e=>I.value="phone")},{default:l(()=>[c(g,{class:"tab-icon"},{default:l(()=>[n("ðŸ“±")]),_:1}),c(g,{class:"tab-text"},{default:l(()=>[n("æ‰‹æœºç™»å½•")]),_:1})]),_:1},8,["class"])]),_:1}),"wechat"===I.value?(t(),a(h,{key:0,class:"login-form"},{default:l(()=>[c(h,{class:"wechat-info"},{default:l(()=>[c(g,{class:"info-icon"},{default:l(()=>[n("ðŸ”’")]),_:1}),c(g,{class:"info-text"},{default:l(()=>[n("ä½¿ç”¨å¾®ä¿¡è´¦å·å¿«é€Ÿç™»å½•")]),_:1})]),_:1}),c(b,{class:"btn-wechat",onClick:T},{default:l(()=>[c(g,{class:"btn-icon"},{default:l(()=>[n("ðŸ’š")]),_:1}),c(g,{class:"btn-text"},{default:l(()=>[n("å¾®ä¿¡ä¸€é”®ç™»å½•")]),_:1})]),_:1})]),_:1})):(t(),a(h,{key:1,class:"login-form"},{default:l(()=>[c(h,{class:"form-group"},{default:l(()=>[c(h,{class:"input-wrapper"},{default:l(()=>[c(g,{class:"input-icon"},{default:l(()=>[n("ðŸ“±")]),_:1}),c(x,{modelValue:V.value,"onUpdate:modelValue":m[2]||(m[2]=e=>V.value=e),type:"number",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·",maxlength:"11",class:"form-input","placeholder-class":"input-placeholder"},null,8,["modelValue"])]),_:1})]),_:1}),c(h,{class:"form-group"},{default:l(()=>[c(h,{class:"input-wrapper"},{default:l(()=>[c(g,{class:"input-icon"},{default:l(()=>[n("ðŸ”")]),_:1}),c(x,{modelValue:j.value,"onUpdate:modelValue":m[3]||(m[3]=e=>j.value=e),type:"number",placeholder:"è¯·è¾“å…¥éªŒè¯ç ",maxlength:"6",class:"form-input code-input","placeholder-class":"input-placeholder"},null,8,["modelValue"]),c(b,{class:i(["btn-code",{disabled:F.value>0}]),disabled:F.value>0,onClick:U},{default:l(()=>[n(r(F.value>0?`${F.value}s`:"èŽ·å–éªŒè¯ç "),1)]),_:1},8,["class","disabled"])]),_:1})]),_:1}),c(b,{class:"btn-login",onClick:$},{default:l(()=>[c(g,{class:"btn-text"},{default:l(()=>[n("ç«‹å³ç™»å½•")]),_:1})]),_:1})]),_:1})),c(h,{class:"agreement"},{default:l(()=>[c(y,{onChange:q},{default:l(()=>[c(w,{class:"agreement-label"},{default:l(()=>[c(k,{checked:L.value,color:"#FF8C42",class:"agreement-checkbox"},null,8,["checked"]),c(g,{class:"agreement-text"},{default:l(()=>[n(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ "),c(g,{class:"agreement-link",onClick:m[4]||(m[4]=v(e=>z("user"),["stop"]))},{default:l(()=>[n("ã€Šç”¨æˆ·åè®®ã€‹")]),_:1}),n(" å’Œ "),c(g,{class:"agreement-link",onClick:m[5]||(m[5]=v(e=>z("privacy"),["stop"]))},{default:l(()=>[n("ã€Šéšç§æ”¿ç­–ã€‹")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c(h,{class:"other-login"},{default:l(()=>[c(h,{class:"divider-wrapper"},{default:l(()=>[c(h,{class:"divider-line"}),c(g,{class:"divider-text"},{default:l(()=>[n("å…¶ä»–ç™»å½•æ–¹å¼")]),_:1}),c(h,{class:"divider-line"})]),_:1}),c(h,{class:"other-methods"},{default:l(()=>[c(h,{class:"method-item",onClick:A},{default:l(()=>[c(h,{class:"method-icon apple"},{default:l(()=>[c(g,{class:"icon-text"})]),_:1}),c(g,{class:"method-name"},{default:l(()=>[n("Apple")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-72bab012"]]);export{I as default};
