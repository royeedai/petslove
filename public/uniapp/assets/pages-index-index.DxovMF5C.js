import{r as a,c as e,o as s,a as t,w as l,i as c,g as u,b as o,d as n,e as i,f as r,h as d,S as f,n as _,j as m,k as p,F as g,l as v,m as b,p as h,t as k,q as y,s as C,u as w,v as x,x as F}from"./index-CD2lgknr.js";import{_ as q,r as A,c as T}from"./_plugin-vue_export-helper.DKEN6AQv.js";const L=q({__name:"index",setup(q){const L=a(!1),U=a([{imageUrl:"https://images.unsplash.com/photo-1450778869180-41d0601e046e?w=800&q=80",title:"è®©çˆ±å¿ƒä¼ é€’æ¸©æš–",subtitle:"æ¯ä¸€æ¬¡æ•‘åŠ©éƒ½å€¼å¾—è¢«è®°å½•"},{imageUrl:"https://images.unsplash.com/photo-1415369629372-26f2fe60c467?w=800&q=80",title:"ç»™TAä¸€ä¸ªæ¸©æš–çš„å®¶",subtitle:"é¢†å…»ä»£æ›¿è´­ä¹°ï¼Œè®©ç”Ÿå‘½å»¶ç»­"},{imageUrl:"https://images.unsplash.com/photo-1425082661705-1834bfd09dca?w=800&q=80",title:"æ¯ä¸ªç”Ÿå‘½éƒ½å€¼å¾—è¢«çè§†",subtitle:"ä¸€èµ·å®ˆæŠ¤æµæµªçš„å°å¤©ä½¿"}]),$=a({rescueCount:0,animalCount:0,adoptionCount:0}),j=a([]),D=a([]),M=e(()=>{const a=u(),e=a.statusBarHeight||0;return a.windowHeight-(e+44+50)+"px"});s(()=>{z(),H()});const z=async()=>{try{const a=await A.getTaskList({page:1,size:3});a.data&&a.data.records&&(j.value=a.data.records.map(a=>({...a,cover:a.cover||"https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=600&q=80"})))}catch(a){console.error("åŠ è½½æ•‘åŠ©ä»»åŠ¡å¤±è´¥",a)}try{const a=await T.getPostList({page:1,size:3});a.data&&a.data.records&&(D.value=a.data.records.map(a=>({...a,userAvatar:a.userAvatar||`https://api.dicebear.com/7.x/avataaars/svg?seed=${a.userId}`})))}catch(a){console.error("åŠ è½½ç¤¾åŒºåŠ¨æ€å¤±è´¥",a)}},H=()=>{$.value={rescueCount:156,animalCount:42,adoptionCount:89}},I=()=>{w({url:"/pages/user/messages"})},S=a=>{w({url:a})},B=()=>{x({title:"æèµ åŠŸèƒ½å¼€å‘ä¸­",icon:"none"})},N=()=>{x({title:"é¢†å…»ç”³è¯·åŠŸèƒ½å¼€å‘ä¸­",icon:"none"})},P=a=>{if(!a)return"åˆšåˆš";const e=new Date,s=new Date(a),t=e-s,l=Math.floor(t/1e3/60);if(l<1)return"åˆšåˆš";if(l<60)return`${l}åˆ†é’Ÿå‰`;const c=Math.floor(l/60);if(c<24)return`${c}å°æ—¶å‰`;const u=Math.floor(c/24);return u<7?`${u}å¤©å‰`:s.toLocaleDateString()};return(a,e)=>{const s=i,u=c,w=h,q=b,A=m,T=f;return o(),t(u,{class:"page"},{default:l(()=>[n(u,{class:"custom-navbar"},{default:l(()=>[n(u,{class:"navbar-content"},{default:l(()=>[n(u,{class:"navbar-left"},{default:l(()=>[n(u,{class:"logo-wrapper"},{default:l(()=>[n(s,{class:"logo-icon"},{default:l(()=>[r("ğŸ¾")]),_:1})]),_:1}),n(u,{class:"app-info"},{default:l(()=>[n(s,{class:"app-name"},{default:l(()=>[r("èŒå‹ç›Šç«™")]),_:1}),n(s,{class:"app-slogan"},{default:l(()=>[r("å®ˆæŠ¤æ¯ä¸ªç”Ÿå‘½")]),_:1})]),_:1})]),_:1}),n(u,{class:"navbar-right"},{default:l(()=>[n(u,{class:"icon-btn",onClick:I},{default:l(()=>[n(s,{class:"icon"},{default:l(()=>[r("ğŸ””")]),_:1}),L.value?(o(),t(u,{key:0,class:"badge-dot"})):d("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),n(T,{"scroll-y":"",class:"scroll-content",style:_({height:M.value})},{default:l(()=>[n(u,{class:"banner-section"},{default:l(()=>[n(A,{"indicator-dots":!0,autoplay:!0,interval:4e3,duration:500,circular:!0,"indicator-color":"rgba(168, 162, 158, 0.3)","indicator-active-color":"#FF8C42",class:"banner-swiper"},{default:l(()=>[(o(!0),p(g,null,v(U.value,(a,e)=>(o(),t(q,{key:e},{default:l(()=>[n(u,{class:"banner-item",onClick:e=>(a=>{console.log("ç‚¹å‡»è½®æ’­å›¾:",a)})(a)},{default:l(()=>[n(w,{src:a.imageUrl,mode:"aspectFill",class:"banner-image"},null,8,["src"]),n(u,{class:"banner-overlay"},{default:l(()=>[n(s,{class:"banner-title"},{default:l(()=>[r(k(a.title||"è®©çˆ±å¿ƒä¼ é€’æ¸©æš–"),1)]),_:2},1024),n(s,{class:"banner-subtitle"},{default:l(()=>[r(k(a.subtitle||"æ¯ä¸€æ¬¡æ•‘åŠ©éƒ½å€¼å¾—è¢«è®°å½•"),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),n(u,{class:"features-section"},{default:l(()=>[n(u,{class:"features-grid"},{default:l(()=>[n(u,{class:"feature-item",onClick:e[0]||(e[0]=a=>S("/pages/rescue/list"))},{default:l(()=>[n(u,{class:"feature-icon-wrapper urgent"},{default:l(()=>[n(s,{class:"feature-icon"},{default:l(()=>[r("ğŸ†˜")]),_:1})]),_:1}),n(s,{class:"feature-label"},{default:l(()=>[r("æ•‘åŠ©ä»»åŠ¡")]),_:1}),n(s,{class:"feature-desc"},{default:l(()=>[r("ç«‹å³å‚ä¸")]),_:1})]),_:1}),n(u,{class:"feature-item",onClick:e[1]||(e[1]=a=>S("/pages/animal/list"))},{default:l(()=>[n(u,{class:"feature-icon-wrapper animal"},{default:l(()=>[n(s,{class:"feature-icon"},{default:l(()=>[r("ğŸ¾")]),_:1})]),_:1}),n(s,{class:"feature-label"},{default:l(()=>[r("æµæµªåŠ¨ç‰©")]),_:1}),n(s,{class:"feature-desc"},{default:l(()=>[r("ç­‰å¾…é¢†å…»")]),_:1})]),_:1}),n(u,{class:"feature-item",onClick:B},{default:l(()=>[n(u,{class:"feature-icon-wrapper donation"},{default:l(()=>[n(s,{class:"feature-icon"},{default:l(()=>[r("â¤ï¸")]),_:1})]),_:1}),n(s,{class:"feature-label"},{default:l(()=>[r("çˆ±å¿ƒæèµ ")]),_:1}),n(s,{class:"feature-desc"},{default:l(()=>[r("çŒ®å‡ºçˆ±å¿ƒ")]),_:1})]),_:1}),n(u,{class:"feature-item",onClick:N},{default:l(()=>[n(u,{class:"feature-icon-wrapper adoption"},{default:l(()=>[n(s,{class:"feature-icon"},{default:l(()=>[r("ğŸ ")]),_:1})]),_:1}),n(s,{class:"feature-label"},{default:l(()=>[r("é¢†å…»ç”³è¯·")]),_:1}),n(s,{class:"feature-desc"},{default:l(()=>[r("ç»™TAä¸€ä¸ªå®¶")]),_:1})]),_:1})]),_:1})]),_:1}),n(u,{class:"stats-section"},{default:l(()=>[n(u,{class:"stats-card"},{default:l(()=>[n(u,{class:"stat-item"},{default:l(()=>[n(s,{class:"stat-value"},{default:l(()=>[r(k($.value.rescueCount),1)]),_:1}),n(s,{class:"stat-label"},{default:l(()=>[r("æ•‘åŠ©æ¬¡æ•°")]),_:1})]),_:1}),n(u,{class:"stat-divider"}),n(u,{class:"stat-item"},{default:l(()=>[n(s,{class:"stat-value"},{default:l(()=>[r(k($.value.animalCount),1)]),_:1}),n(s,{class:"stat-label"},{default:l(()=>[r("åŠ¨ç‰©åœ¨åº“")]),_:1})]),_:1}),n(u,{class:"stat-divider"}),n(u,{class:"stat-item"},{default:l(()=>[n(s,{class:"stat-value"},{default:l(()=>[r(k($.value.adoptionCount),1)]),_:1}),n(s,{class:"stat-label"},{default:l(()=>[r("æˆåŠŸé¢†å…»")]),_:1})]),_:1})]),_:1})]),_:1}),n(u,{class:"section"},{default:l(()=>[n(u,{class:"section-header"},{default:l(()=>[n(u,{class:"header-left"},{default:l(()=>[n(u,{class:"section-icon-wrapper urgent-bg"},{default:l(()=>[n(s,{class:"section-icon"},{default:l(()=>[r("ğŸ†˜")]),_:1})]),_:1}),n(u,{class:"header-text"},{default:l(()=>[n(s,{class:"section-title"},{default:l(()=>[r("ç´§æ€¥æ•‘åŠ©")]),_:1}),n(s,{class:"section-subtitle"},{default:l(()=>[r("éœ€è¦æ‚¨çš„å¸®åŠ©")]),_:1})]),_:1})]),_:1}),n(u,{class:"section-more",onClick:e[2]||(e[2]=a=>S("/pages/rescue/list"))},{default:l(()=>[n(s,{class:"more-text"},{default:l(()=>[r("æ›´å¤š")]),_:1}),n(s,{class:"more-arrow"},{default:l(()=>[r("â€º")]),_:1})]),_:1})]),_:1}),j.value.length>0?(o(),t(u,{key:0,class:"rescue-list"},{default:l(()=>[(o(!0),p(g,null,v(j.value,a=>(o(),t(u,{class:"rescue-card",key:a.id,onClick:a=>{x({title:"æ•‘åŠ©è¯¦æƒ…é¡µé¢å¼€å‘ä¸­",icon:"none"})}},{default:l(()=>[n(w,{src:a.cover,mode:"aspectFill",class:"rescue-image"},null,8,["src"]),"urgent"===a.urgencyLevel?(o(),t(u,{key:0,class:"urgent-badge"},{default:l(()=>[n(s,{class:"badge-pulse"}),n(s,{class:"badge-text"},{default:l(()=>[r("ç´§æ€¥")]),_:1})]),_:1})):d("",!0),n(u,{class:"rescue-content"},{default:l(()=>[n(s,{class:"rescue-title"},{default:l(()=>[r(k(a.title),1)]),_:2},1024),n(u,{class:"rescue-meta"},{default:l(()=>[n(u,{class:"meta-item"},{default:l(()=>[n(s,{class:"meta-icon"},{default:l(()=>[r("ğŸ“")]),_:1}),n(s,{class:"meta-text"},{default:l(()=>[r(k(a.address),1)]),_:2},1024)]),_:2},1024),n(u,{class:"meta-item"},{default:l(()=>[n(s,{class:"meta-icon"},{default:l(()=>[r("â°")]),_:1}),n(s,{class:"meta-text"},{default:l(()=>[r(k(P(a.createTime)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),n(u,{class:"rescue-footer"},{default:l(()=>[n(u,{class:y(["status-badge",a.status])},{default:l(()=>{return[r(k((e=a.status,{pending:"å¾…æ•‘åŠ©",processing:"æ•‘åŠ©ä¸­",completed:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"}[e]||"æœªçŸ¥")),1)];var e}),_:2},1032,["class"]),n(u,{class:"rescue-action"},{default:l(()=>[n(s,{class:"action-text"},{default:l(()=>[r("æŸ¥çœ‹è¯¦æƒ…")]),_:1}),n(s,{class:"action-arrow"},{default:l(()=>[r("â€º")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),t(u,{key:1,class:"empty-state"},{default:l(()=>[n(s,{class:"empty-icon"},{default:l(()=>[r("ğŸ”")]),_:1}),n(s,{class:"empty-title"},{default:l(()=>[r("æš‚æ— æ•‘åŠ©ä»»åŠ¡")]),_:1}),n(s,{class:"empty-description"},{default:l(()=>[r("å½“å‰æ²¡æœ‰ç´§æ€¥æ•‘åŠ©éœ€æ±‚")]),_:1})]),_:1}))]),_:1}),n(u,{class:"section"},{default:l(()=>[n(u,{class:"section-header"},{default:l(()=>[n(u,{class:"header-left"},{default:l(()=>[n(u,{class:"section-icon-wrapper community-bg"},{default:l(()=>[n(s,{class:"section-icon"},{default:l(()=>[r("ğŸ’¬")]),_:1})]),_:1}),n(u,{class:"header-text"},{default:l(()=>[n(s,{class:"section-title"},{default:l(()=>[r("ç¤¾åŒºåŠ¨æ€")]),_:1}),n(s,{class:"section-subtitle"},{default:l(()=>[r("åˆ†äº«çˆ±å® æ•…äº‹")]),_:1})]),_:1})]),_:1}),n(u,{class:"section-more",onClick:e[3]||(e[3]=a=>S("/pages/community/list"))},{default:l(()=>[n(s,{class:"more-text"},{default:l(()=>[r("æ›´å¤š")]),_:1}),n(s,{class:"more-arrow"},{default:l(()=>[r("â€º")]),_:1})]),_:1})]),_:1}),D.value.length>0?(o(),t(u,{key:0,class:"post-list"},{default:l(()=>[(o(!0),p(g,null,v(D.value,a=>(o(),t(u,{class:"post-card",key:a.id,onClick:a=>{x({title:"åŠ¨æ€è¯¦æƒ…é¡µé¢å¼€å‘ä¸­",icon:"none"})}},{default:l(()=>[n(u,{class:"post-header"},{default:l(()=>[n(w,{src:a.userAvatar,mode:"aspectFill",class:"user-avatar"},null,8,["src"]),n(u,{class:"user-info"},{default:l(()=>[n(s,{class:"user-nickname"},{default:l(()=>[r(k(a.userNickname),1)]),_:2},1024),n(s,{class:"post-time"},{default:l(()=>[r(k(P(a.createTime)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),n(s,{class:"post-content"},{default:l(()=>[r(k(a.content),1)]),_:2},1024),a.images&&a.images.length>0?(o(),t(u,{key:0,class:"post-images"},{default:l(()=>[(o(!0),p(g,null,v(a.images.slice(0,3),(e,s)=>(o(),t(w,{key:s,src:e,mode:"aspectFill",class:y(["post-image",{single:1===a.images.length}]),onClick:C(e=>{return t=a.images,void F({urls:t,current:s});var t},["stop"])},null,8,["src","class","onClick"]))),128)),a.images.length>3?(o(),t(u,{key:0,class:"more-images"},{default:l(()=>[n(s,{class:"more-text"},{default:l(()=>[r("+"+k(a.images.length-3),1)]),_:2},1024)]),_:2},1024)):d("",!0)]),_:2},1024)):d("",!0),n(u,{class:"post-actions"},{default:l(()=>[n(u,{class:"action-item"},{default:l(()=>[n(s,{class:"action-icon"},{default:l(()=>[r("â¤ï¸")]),_:1}),n(s,{class:"action-count"},{default:l(()=>[r(k(a.likeCount||0),1)]),_:2},1024)]),_:2},1024),n(u,{class:"action-item"},{default:l(()=>[n(s,{class:"action-icon"},{default:l(()=>[r("ğŸ’¬")]),_:1}),n(s,{class:"action-count"},{default:l(()=>[r(k(a.commentCount||0),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),t(u,{key:1,class:"empty-state"},{default:l(()=>[n(s,{class:"empty-icon"},{default:l(()=>[r("ğŸ“")]),_:1}),n(s,{class:"empty-title"},{default:l(()=>[r("æš‚æ— ç¤¾åŒºåŠ¨æ€")]),_:1}),n(s,{class:"empty-description"},{default:l(()=>[r("å¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡åŠ¨æ€å§")]),_:1})]),_:1}))]),_:1}),n(u,{class:"page-footer"})]),_:1},8,["style"])]),_:1})}}},[["__scopeId","data-v-5acdff79"]]);export{L as default};
