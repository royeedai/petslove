import{_ as V,u as k,r as f,a as C,c as z,o as U,b as n,d as l,w as s,e as r,f as B,g,t as E,E as i}from"./index-C9AwdplH.js";const I={class:"login-container"},N={class:"login-box"},R={class:"code-input"},S={__name:"index",setup($){const v=B(),y=k(),u=f(null),d=f(!1),t=f(0),o=C({phone:"",code:""}),h={phone:[{required:!0,message:"请输入手机号",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确",trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]},x=async()=>{if(!o.phone){i.warning("请先输入手机号");return}if(!/^1[3-9]\d{9}$/.test(o.phone)){i.warning("手机号格式不正确");return}i.success("验证码已发送（测试环境，验证码为：123456）"),t.value=60;const a=setInterval(()=>{t.value--,t.value<=0&&clearInterval(a)},1e3)},b=async()=>{u.value&&await u.value.validate(async a=>{if(a){d.value=!0;try{await y.userLogin(o),i.success("登录成功"),v.push("/")}catch(e){console.error("登录失败",e)}finally{d.value=!1}}})};return(a,e)=>{const m=r("el-input"),c=r("el-form-item"),_=r("el-button"),w=r("el-form");return U(),z("div",I,[n("div",N,[e[3]||(e[3]=n("div",{class:"login-header"},[n("h2",null,"萌友益站管理后台"),n("p",null,"公益救助平台管理系统")],-1)),l(w,{ref_key:"formRef",ref:u,model:o,rules:h,class:"login-form"},{default:s(()=>[l(c,{prop:"phone"},{default:s(()=>[l(m,{modelValue:o.phone,"onUpdate:modelValue":e[0]||(e[0]=p=>o.phone=p),placeholder:"请输入手机号","prefix-icon":"User",size:"large"},null,8,["modelValue"])]),_:1}),l(c,{prop:"code"},{default:s(()=>[n("div",R,[l(m,{modelValue:o.code,"onUpdate:modelValue":e[1]||(e[1]=p=>o.code=p),placeholder:"请输入验证码","prefix-icon":"Key",size:"large",style:{flex:"1"}},null,8,["modelValue"]),l(_,{type:"primary",size:"large",disabled:t.value>0,onClick:x,style:{"margin-left":"10px",width:"120px"}},{default:s(()=>[g(E(t.value>0?`${t.value}s`:"获取验证码"),1)]),_:1},8,["disabled"])])]),_:1}),l(c,null,{default:s(()=>[l(_,{type:"primary",size:"large",style:{width:"100%"},loading:d.value,onClick:b},{default:s(()=>[...e[2]||(e[2]=[g(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},L=V(S,[["__scopeId","data-v-de85cfa7"]]);export{L as default};
