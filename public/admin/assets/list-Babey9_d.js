import{r as z,a as x,h as j,c as I,o as r,b as w,d as t,j as P,w as l,e as s,k as R,i as p,g as o,t as A,E as y,l as F}from"./index-C9AwdplH.js";const L={class:"page-container"},G={__name:"list",setup(O){const g=z(!1),b=z([]),n=x({phone:"",nickname:"",status:null}),u=x({page:1,size:10,total:0});j(()=>{f()});const f=async()=>{g.value=!0;try{setTimeout(()=>{b.value=[],u.total=0,g.value=!1},500)}catch(m){console.error("加载数据失败",m),g.value=!1}},k=()=>{u.page=1,f()},B=()=>{n.phone="",n.nickname="",n.status=null,k()},D=m=>{y.info("编辑功能待开发")},E=m=>{y.info("积分管理功能待开发")},T=async m=>{try{await F.confirm(`确定要${m.status===1?"禁用":"启用"}该用户吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),y.success("操作成功"),f()}catch{console.log("取消操作")}};return(m,e)=>{const v=s("el-input"),_=s("el-form-item"),V=s("el-option"),U=s("el-select"),c=s("el-button"),N=s("el-form"),i=s("el-table-column"),d=s("el-tag"),S=s("el-table"),M=s("el-pagination"),$=R("loading");return r(),I("div",L,[e[16]||(e[16]=w("div",{class:"page-header"},[w("h2",{class:"page-title"},"用户列表")],-1)),t(N,{inline:!0,model:n,class:"search-form"},{default:l(()=>[t(_,{label:"手机号"},{default:l(()=>[t(v,{modelValue:n.phone,"onUpdate:modelValue":e[0]||(e[0]=a=>n.phone=a),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"昵称"},{default:l(()=>[t(v,{modelValue:n.nickname,"onUpdate:modelValue":e[1]||(e[1]=a=>n.nickname=a),placeholder:"请输入昵称",clearable:""},null,8,["modelValue"])]),_:1}),t(_,{label:"状态"},{default:l(()=>[t(U,{modelValue:n.status,"onUpdate:modelValue":e[2]||(e[2]=a=>n.status=a),placeholder:"请选择状态",clearable:""},{default:l(()=>[t(V,{label:"正常",value:1}),t(V,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(_,null,{default:l(()=>[t(c,{type:"primary",onClick:k},{default:l(()=>[...e[5]||(e[5]=[o("查询",-1)])]),_:1}),t(c,{onClick:B},{default:l(()=>[...e[6]||(e[6]=[o("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"]),P((r(),p(S,{data:b.value,border:"",stripe:""},{default:l(()=>[t(i,{prop:"id",label:"ID",width:"80"}),t(i,{prop:"nickname",label:"昵称"}),t(i,{prop:"phone",label:"手机号"}),t(i,{prop:"role",label:"角色"},{default:l(({row:a})=>[a.role==="ADMIN"?(r(),p(d,{key:0,type:"danger"},{default:l(()=>[...e[7]||(e[7]=[o("管理员",-1)])]),_:1})):a.role==="VOLUNTEER"?(r(),p(d,{key:1,type:"warning"},{default:l(()=>[...e[8]||(e[8]=[o("志愿者",-1)])]),_:1})):(r(),p(d,{key:2,type:"info"},{default:l(()=>[...e[9]||(e[9]=[o("普通用户",-1)])]),_:1}))]),_:1}),t(i,{prop:"points",label:"积分"}),t(i,{prop:"isVerified",label:"实名认证"},{default:l(({row:a})=>[a.isVerified===1?(r(),p(d,{key:0,type:"success"},{default:l(()=>[...e[10]||(e[10]=[o("已认证",-1)])]),_:1})):(r(),p(d,{key:1,type:"info"},{default:l(()=>[...e[11]||(e[11]=[o("未认证",-1)])]),_:1}))]),_:1}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[a.status===1?(r(),p(d,{key:0,type:"success"},{default:l(()=>[...e[12]||(e[12]=[o("正常",-1)])]),_:1})):(r(),p(d,{key:1,type:"danger"},{default:l(()=>[...e[13]||(e[13]=[o("禁用",-1)])]),_:1}))]),_:1}),t(i,{prop:"createTime",label:"创建时间",width:"180"}),t(i,{label:"操作",width:"200",fixed:"right"},{default:l(({row:a})=>[t(c,{type:"primary",size:"small",onClick:C=>D(a)},{default:l(()=>[...e[14]||(e[14]=[o("编辑",-1)])]),_:1},8,["onClick"]),t(c,{type:"warning",size:"small",onClick:C=>E(a)},{default:l(()=>[...e[15]||(e[15]=[o("积分",-1)])]),_:1},8,["onClick"]),t(c,{type:a.status===1?"danger":"success",size:"small",onClick:C=>T(a)},{default:l(()=>[o(A(a.status===1?"禁用":"启用"),1)]),_:2},1032,["type","onClick"])]),_:1})]),_:1},8,["data"])),[[$,g.value]]),t(M,{"current-page":u.page,"onUpdate:currentPage":e[3]||(e[3]=a=>u.page=a),"page-size":u.size,"onUpdate:pageSize":e[4]||(e[4]=a=>u.size=a),total:u.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:f,onCurrentChange:f,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["current-page","page-size","total"])])}}};export{G as default};
