import{r as e,o as l,v as a,c as s,w as t,i as c,a as i,b as o,g as n,h as u,j as d,k as r,d as m,F as f,e as _,l as k,t as p,m as g,n as v,x as C,y as h}from"./index-CZhDUO0x.js";import{_ as y}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=y({__name:"list",setup(y){const b=e(null),x=e("all"),j=e([{label:"å…¨éƒ¨",value:"all",emoji:"ğŸ“‹"},{label:"æ•‘åŠ©æ•…äº‹",value:"rescue",emoji:"ğŸ†˜"},{label:"é¢†å…»æ—¥è®°",value:"adoption",emoji:"ğŸ "},{label:"èŒå® æ—¥å¸¸",value:"daily",emoji:"ğŸ¾"},{label:"æ±‚åŠ©",value:"help",emoji:"â“"}]),L=e([]);l(()=>{w(),F()});const w=()=>{const e=a("userInfo");e&&(b.value=e)},F=()=>{console.log("åŠ è½½ç¤¾åŒºåŠ¨æ€åˆ—è¡¨")},I=()=>{b.value?v({url:"/pages/community/publish"}):v({url:"/pages/login/index"})},M=e=>{b.value?v({url:`/pages/community/detail?id=${e.id}`}):v({url:"/pages/login/index"})};return(e,l)=>{const a=n,y=u,w=c,F=r;return i(),s(w,{class:"page"},{default:t(()=>[o(w,{class:"publish-bar",onClick:I},{default:t(()=>{var e;return[o(a,{src:(null==(e=b.value)?void 0:e.avatar)||"/static/default-avatar.png",mode:"aspectFill",class:"user-avatar"},null,8,["src"]),o(w,{class:"publish-input"},{default:t(()=>[o(y,{class:"publish-placeholder"},{default:t(()=>[d("åˆ†äº«ä½ çš„çˆ±å® æ•…äº‹...")]),_:1})]),_:1}),o(w,{class:"publish-btn"},{default:t(()=>[o(y,{class:"publish-icon"},{default:t(()=>[d("ğŸ“")]),_:1})]),_:1})]}),_:1}),o(F,{"scroll-x":"",class:"category-scroll"},{default:t(()=>[o(w,{class:"category-list"},{default:t(()=>[(i(!0),m(f,null,_(j.value,(e,l)=>(i(),s(w,{key:l,class:k(["category-item",{active:x.value===e.value}]),onClick:l=>x.value=e.value},{default:t(()=>[o(y,{class:"category-emoji"},{default:t(()=>[d(p(e.emoji),1)]),_:2},1024),o(y,{class:"category-text"},{default:t(()=>[d(p(e.label),1)]),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1})]),_:1}),o(w,{class:"post-list"},{default:t(()=>[(i(!0),m(f,null,_(L.value,e=>(i(),s(w,{key:e.id,class:"post-card"},{default:t(()=>{return[o(w,{class:"post-header"},{default:t(()=>[o(a,{src:e.userAvatar,mode:"aspectFill",class:"avatar",onClick:l=>{return a=e.userId,void v({url:`/pages/user/profile?id=${a}`});var a}},null,8,["src","onClick"]),o(w,{class:"user-info"},{default:t(()=>[o(y,{class:"nickname"},{default:t(()=>[d(p(e.userNickname),1)]),_:2},1024),o(y,{class:"time"},{default:t(()=>[d(p((e.createTime,"åˆšåˆš")),1)]),_:2},1024)]),_:2},1024),o(w,{class:"more-btn",onClick:e=>{C({itemList:["ä¸¾æŠ¥","ä¸æ„Ÿå…´è¶£"],success:e=>{console.log("é€‰æ‹©äº†ï¼š"+e.tapIndex)}})}},{default:t(()=>[o(y,{class:"more-icon"},{default:t(()=>[d("â‹¯")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),o(w,{class:"post-content"},{default:t(()=>[o(y,{class:"content-text"},{default:t(()=>[d(p(e.content),1)]),_:2},1024)]),_:2},1024),e.images&&e.images.length>0?(i(),s(w,{key:0,class:k(["image-grid",(l=e.images.length,1===l?"grid-1":2===l?"grid-2":4===l?"grid-4":"grid-3")])},{default:t(()=>[(i(!0),m(f,null,_(e.images,(l,t)=>(i(),s(a,{key:t,src:l,mode:"aspectFill",class:"post-image",onClick:l=>{return a=e.images,void h({urls:a,current:t});var a}},null,8,["src","onClick"]))),128))]),_:2},1032,["class"])):g("",!0),e.tags&&e.tags.length>0?(i(),s(w,{key:1,class:"tags-wrapper"},{default:t(()=>[(i(!0),m(f,null,_(e.tags,(e,l)=>(i(),s(w,{key:l,class:"tag-item",onClick:l=>(e=>{console.log("ç‚¹å‡»æ ‡ç­¾ï¼š",e)})(e)},{default:t(()=>[d(" #"+p(e),1)]),_:2},1032,["onClick"]))),128))]),_:2},1024)):g("",!0),o(w,{class:"post-actions"},{default:t(()=>[o(w,{class:"action-item",onClick:l=>(e=>{b.value?(e.isLiked=!e.isLiked,e.isLiked?e.likeCount=(e.likeCount||0)+1:e.likeCount=Math.max(0,(e.likeCount||0)-1)):v({url:"/pages/login/index"})})(e)},{default:t(()=>[o(y,{class:k(["action-icon",{liked:e.isLiked}])},{default:t(()=>[d(p(e.isLiked?"â¤ï¸":"ğŸ¤"),1)]),_:2},1032,["class"]),o(y,{class:k(["action-text",{active:e.isLiked}])},{default:t(()=>[d(p(e.likeCount>0?e.likeCount:"ç‚¹èµ"),1)]),_:2},1032,["class"])]),_:2},1032,["onClick"]),o(w,{class:"action-item",onClick:l=>M(e)},{default:t(()=>[o(y,{class:"action-icon"},{default:t(()=>[d("ğŸ’¬")]),_:1}),o(y,{class:"action-text"},{default:t(()=>[d(p(e.commentCount>0?e.commentCount:"è¯„è®º"),1)]),_:2},1024)]),_:2},1032,["onClick"]),o(w,{class:"action-item",onClick:e=>{uni.showShareMenu({withShareTicket:!0})}},{default:t(()=>[o(y,{class:"action-icon"},{default:t(()=>[d("ğŸ“¤")]),_:1}),o(y,{class:"action-text"},{default:t(()=>[d("åˆ†äº«")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e.hotComments&&e.hotComments.length>0?(i(),s(w,{key:2,class:"comments-preview"},{default:t(()=>[(i(!0),m(f,null,_(e.hotComments,(e,l)=>(i(),s(w,{key:l,class:"comment-item"},{default:t(()=>[o(y,{class:"comment-user"},{default:t(()=>[d(p(e.userNickname)+"ï¼š",1)]),_:2},1024),o(y,{class:"comment-content"},{default:t(()=>[d(p(e.content),1)]),_:2},1024)]),_:2},1024))),128)),e.commentCount>2?(i(),s(w,{key:0,class:"view-all-comments",onClick:l=>M(e)},{default:t(()=>[d(" æŸ¥çœ‹å…¨éƒ¨ "+p(e.commentCount)+" æ¡è¯„è®º â€º ",1)]),_:2},1032,["onClick"])):g("",!0)]),_:2},1024)):g("",!0)];var l}),_:2},1024))),128)),0===L.value.length?(i(),s(w,{key:0,class:"empty-state"},{default:t(()=>[o(y,{class:"empty-icon"},{default:t(()=>[d("ğŸ’¬")]),_:1}),o(y,{class:"empty-text"},{default:t(()=>[d("æš‚æ— ç¤¾åŒºåŠ¨æ€")]),_:1}),o(y,{class:"empty-desc"},{default:t(()=>[d("å¿«æ¥å‘å¸ƒç¬¬ä¸€æ¡åŠ¨æ€å§")]),_:1})]),_:1})):g("",!0)]),_:1})]),_:1})}}},[["__scopeId","data-v-d7783e72"]]);export{b as default};
